//- nav.head-nav.u-fr
//-   ul.head-nav__list
//-     each val, index in theme.menu
//-       li.head-nav__item: a.head-nav__link(href = url_for(val))
//-         = index

- function getNextPost() {
    - if (site.shuffled != null && site.shuffled.length != 0) {
      - return site.shuffled.pop()
    - }
    - site.shuffled = getShuffled()
    - return getNextPost()
- }

- function getShuffled() {
    - let date = (new Date()).getDate()
    - let result = site.posts.toArray().slice()
    - for (let i = 0; i < result.length; ++i) {
      - let tmp = result[i]
      - let swap_index = i + date % (result.length - i)
      - result[i] = result[swap_index]
      - result[swap_index] = tmp
    - }
    - return result
- }

nav.head-nav.u-fr
  ul.head-nav__list
      li.head-nav__item: a.head-nav__link(href = url_for(getNextPost().path)) 点我吧
