//- nav.head-nav.u-fr
//-   ul.head-nav__list
//-     each val, index in theme.menu
//-       li.head-nav__item: a.head-nav__link(href = url_for(val))
//-         = index

- function getNextPost() {
  - let posts = site.posts.sort('path').toArray()
  - let index = posts.findIndex(post => path.startsWith(post.path))
  - if (index != -1)
    - return posts[(index + 1) % posts.length]
  - else
    - return posts[0]
- }

//- - function getNextPost() {
//-     - if (site.shuffled != null && site.shuffled.length != 0) {
//-       - if (is_post())
//-         - return site.shuffled.pop()
//-       - else
//-         - return site.shuffled[0]
//-     - }
//-     - site.shuffled = getShuffled()
//-     - return getNextPost()
//- - }

//- - function getShuffled() {
//-     - let date = (new Date()).getDate()
//-     - let result = site.posts.toArray().slice()
//-     - let swap_index = -1
//-     - for (let i = 0; i < result.length; ++i) {
//-       - swap_index = (swap_index + date - i) % (result.length -i ) + i
//-       - let tmp = result[swap_index]
//-       - for (let j = swap_index; j > i; --j) {
//-         - result[j] = result[j-1]
//-       - }
//-       - result[i] = tmp
//-     - }
//-     - return result
//- - }

nav.head-nav.u-fr
  ul.head-nav__list
      li.head-nav__item: a.head-nav__link(href = url_for(getNextPost().path)) 点我吧
